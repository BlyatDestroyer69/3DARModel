<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bukit Kiara 3D Map</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
            overflow-x: hidden;
            overflow-y: auto;
        }

        header {
            width: 100%;
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            margin: 0;
            font-size: 2.5em;
        }

        main {
            flex-grow: 1; /* Allows main content to expand */
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        model-viewer {
            width: 100%;
            height: 600px; /* Adjust height as needed */
            background-color: #e0e0e0;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            --poster-color: #cccccc; /* Background color before model loads */
            --controls-color: #3498db;
            --progress-bar-color: #2ecc71;
            --progress-bar-height: 5px;
        }

        .info-section {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            width: 100%;
            margin-top: 30px;
            text-align: center;
        }

        .info-section h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 15px;
        }

        .info-section p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .back-button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 20px;
        }

        .back-button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        /* Checkpoint info panel styles (can be adapted if you want interactive points on this page) */
        #info-panel {
            position: fixed; /* Use fixed for overlays */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.95);
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            z-index: 100;
            display: none;
            flex-direction: column;
            align-items: center;
            text-align: center;
            max-width: 90%;
            width: 400px;
            box-sizing: border-box;
        }

        /* ... (rest of info panel styles from index.html can be copied here if needed) ... */
    </style>
</head>
<body>
    <header>
        <h1>Bukit Kiara 3D Map</h1>
    </header>

    <main>
        <model-viewer
            src="./models/bukit_kiara_map.glb"
            alt="Bukit Kiara 3D Map"
            camera-controls
            auto-rotate
            ar
            shadow-intensity="1"
            shadow-softness="0.5"
            exposure="1"
            environment-image="neutral"
            interaction-prompt="none"
            animation-name="main_animation"
        ></model-viewer>

        <div class="info-section">
            <h2>Explore the Interactive 3D Map</h2>
            <p>You've successfully unlocked the Bukit Kiara 3D Map experience. Use your mouse or touch gestures to rotate, zoom, and pan around the model. Click the "Back to Scanner" button if you need to rescan.</p>
            <button class="back-button" onclick="window.location.href='index.html'">Back to Scanner</button>
        </div>
    </main>

    <div id="info-panel" style="display:none;">
        <h2 id="info-panel-title"></h2>
        <p id="info-panel-description"></p>
        <div class="info-panel-buttons">
            <button id="go-to-checkpoint">Explore Checkpoint</button>
            <button id="close-info-panel">Close</button>
        </div>
    </div>

    <script>
        // Checkpoint data (if you want to re-implement interactive checkpoints on this page)
        const CHECKPOINTS_DATA = [
            { id: 1, name: 'Checkpoint 1: The Mystical Flower', description: 'A vibrant floral spot.', url: 'checkpoint_1.html?checkpointId=1' },
            { id: 2, name: 'Checkpoint 2: Woodpecker\'s Perch', description: 'Home to the elusive woodpecker.', url: 'checkpoint_1.html?checkpointId=2' },
            { id: 3, name: 'Checkpoint 3: Margarita Meadows', description: 'A beautiful expanse of Margarita Flower Bushes.', url: 'checkpoint_1.html?checkpointId=3' },
            { id: 4, name: 'Checkpoint 4: Serpent\'s Slumber', description: 'Learn about the fascinating reptiles inhabiting this area.', url: 'checkpoint_1.html?checkpointId=4' },
            { id: 5, name: 'Checkpoint 5: Crystal Tree Haven', description: 'Uncover the legends of the Japanese Tree Crystal.', url: 'checkpoint_1.html?checkpointId=5' },
        ];

        // Example: How to programmatically open the info panel (if you add clickable elements to the model-viewer)
        // const infoPanel = document.getElementById('info-panel');
        // const infoPanelTitle = document.getElementById('info-panel-title');
        // const infoPanelDescription = document.getElementById('info-panel-description');
        // const goToCheckpointButton = document.getElementById('go-to-checkpoint');
        // const closeInfoPanelButton = document.getElementById('close-info-panel');
        // let currentCheckpointId = null;

        // function displayInfoPanel(checkpoint) {
        //     infoPanelTitle.textContent = checkpoint.name;
        //     infoPanelDescription.textContent = checkpoint.description;
        //     currentCheckpointId = checkpoint.id;
        //     infoPanel.style.display = 'flex';
        // }

        // function hideInfoPanel() {
        //     infoPanel.style.display = 'none';
        //     currentCheckpointId = null;
        // }

        // closeInfoPanelButton.addEventListener('click', hideInfoPanel);
        // goToCheckpointButton.addEventListener('click', () => {
        //     if (currentCheckpointId !== null) {
        //         const checkpoint = CHECKPOINTS_DATA.find(cp => cp.id === currentCheckpointId);
        //         if (checkpoint) {
        //             window.location.href = checkpoint.url;
        //         }
        //     }
        // });

        // If you want interactive hotspots on the model-viewer, you'd add:
        // <model-viewer>
        //   <button slot="hotspot-1" data-position="0 0 0" data-normal="0 1 0" data-visibility-attribute="visible" onclick="displayInfoPanel(CHECKPOINTS_DATA[0])">
        //     ðŸ”´
        //   </button>
        // </model-viewer>
        // This is more advanced and requires precise position/normal data for each hotspot.
    </script>
</body>
</html>
